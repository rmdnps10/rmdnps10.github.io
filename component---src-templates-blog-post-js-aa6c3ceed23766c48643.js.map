{"version":3,"file":"component---src-templates-blog-post-js-aa6c3ceed23766c48643.js","mappings":"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","sources":["webpack://gatsby-starter-blog/./src/hooks/usePostVisit.js","webpack://gatsby-starter-blog/./src/lib/trackPostVisit.js","webpack://gatsby-starter-blog/./src/components/comment.jsx","webpack://gatsby-starter-blog/./src/components/TableOfContents.jsx","webpack://gatsby-starter-blog/./src/templates/blog-post.js","webpack://gatsby-starter-blog/./src/utils/tagColors.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport { supabase } from \"../lib/supabase\"\nimport { getPostVisitInfo } from \"../lib/trackPostVisit\"\n\n/**\n * 게시물별 방문 정보를 가져오는 Hook\n * @param {string} postSlug - 게시물 slug\n */\nexport const usePostVisit = postSlug => {\n  const [visitCount, setVisitCount] = useState(0)\n  const [lastVisitedAt, setLastVisitedAt] = useState(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    if (!supabase || !postSlug) {\n      setLoading(false)\n      return\n    }\n\n    const fetchPostVisitInfo = async () => {\n      try {\n        const { visitCount, lastVisitedAt } = await getPostVisitInfo(postSlug)\n        setVisitCount(visitCount)\n        setLastVisitedAt(lastVisitedAt)\n      } catch (error) {\n        console.error(\"Error fetching post visit info:\", error)\n        setVisitCount(0)\n        setLastVisitedAt(null)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchPostVisitInfo()\n  }, [postSlug])\n\n  // 숫자를 포맷팅 (예: 1234 -> \"1.2K\")\n  const formatCount = count => {\n    if (count === null || count === undefined) return \"0\"\n    if (count < 1000) return count.toString()\n    if (count < 1000000) return `${(count / 1000).toFixed(1)}K`\n    return `${(count / 1000000).toFixed(1)}M`\n  }\n\n  // 시간을 상대적 형식으로 포맷팅 (예: \"2시간 전\", \"3일 전\")\n  const formatRelativeTime = dateString => {\n    if (!dateString) return null\n\n    const date = new Date(dateString)\n    const now = new Date()\n    const diff = now - date\n\n    const minutes = Math.floor(diff / 60000)\n    const hours = Math.floor(diff / 3600000)\n    const days = Math.floor(diff / 86400000)\n\n    if (minutes < 1) return \"방금 전\"\n    if (minutes < 60) return `${minutes}분 전`\n    if (hours < 24) return `${hours}시간 전`\n    if (days < 30) return `${days}일 전`\n    if (days < 365) return `${Math.floor(days / 30)}개월 전`\n    return `${Math.floor(days / 365)}년 전`\n  }\n\n  return {\n    visitCount,\n    lastVisitedAt,\n    formattedCount: formatCount(visitCount),\n    formattedTime: formatRelativeTime(lastVisitedAt),\n    loading,\n  }\n}\n","import { supabase } from \"./supabase\"\n\n/**\n * 게시물별 조회수 추적 함수\n * 각 게시물의 방문을 기록하고 마지막 방문 시간을 업데이트합니다.\n */\nexport const trackPostVisit = async postSlug => {\n  if (!supabase || !postSlug) {\n    return\n  }\n\n  try {\n    const now = new Date().toISOString()\n\n    // 해당 게시물의 기존 레코드 확인\n    const { data: existingPost, error: fetchError } = await supabase\n      .from(\"post_visits\")\n      .select(\"*\")\n      .eq(\"post_slug\", postSlug)\n      .maybeSingle()\n\n    if (fetchError) {\n      throw fetchError\n    }\n\n    if (existingPost) {\n      // 기존 레코드가 있으면 방문자 수 증가 및 마지막 방문 시간 업데이트\n      const { error: updateError } = await supabase\n        .from(\"post_visits\")\n        .update({\n          visit_count: existingPost.visit_count + 1,\n          last_visited_at: now,\n        })\n        .eq(\"post_slug\", postSlug)\n\n      if (updateError) throw updateError\n    } else {\n      // 새로운 레코드 생성\n      const { error: insertError } = await supabase.from(\"post_visits\").insert([\n        {\n          post_slug: postSlug,\n          visit_count: 1,\n          last_visited_at: now,\n        },\n      ])\n\n      if (insertError) throw insertError\n    }\n  } catch (error) {\n    console.error(\"Error tracking post visit:\", error)\n  }\n}\n\n/**\n * 게시물의 방문 정보를 가져오는 함수\n */\nexport const getPostVisitInfo = async postSlug => {\n  if (!supabase || !postSlug) {\n    return { visitCount: 0, lastVisitedAt: null }\n  }\n\n  try {\n    const { data, error } = await supabase\n      .from(\"post_visits\")\n      .select(\"visit_count, last_visited_at\")\n      .eq(\"post_slug\", postSlug)\n      .maybeSingle()\n\n    if (error) {\n      throw error\n    }\n\n    // 레코드가 없는 경우\n    if (!data) {\n      return { visitCount: 0, lastVisitedAt: null }\n    }\n\n    return {\n      visitCount: data?.visit_count || 0,\n      lastVisitedAt: data?.last_visited_at || null,\n    }\n  } catch (error) {\n    console.error(\"Error fetching post visit info:\", error)\n    return { visitCount: 0, lastVisitedAt: null }\n  }\n}\n\n/**\n * 조회수가 높은 게시물 목록을 가져오는 함수\n */\nexport const getTopVisitedPosts = async (limit = 3) => {\n  if (!supabase) {\n    return []\n  }\n\n  try {\n    const { data, error } = await supabase\n      .from(\"post_visits\")\n      .select(\"post_slug, visit_count, last_visited_at\")\n      .order(\"visit_count\", { ascending: false })\n      .limit(limit)\n\n    if (error) {\n      throw error\n    }\n\n    return data || []\n  } catch (error) {\n    console.error(\"Error fetching top visited posts:\", error)\n    return []\n  }\n}\n","import React, { useEffect, useRef } from \"react\"\n\nconst Comments = () => {\n  const commentRef = useRef(null)\n\n  useEffect(() => {\n    const giscus = document.createElement(\"script\")\n\n    const giscusConfig = {\n      src: \"https://giscus.app/client.js\",\n      \"data-repo\": \"rmdnps10/inyoung.dev\",\n      \"data-repo-id\": \"R_kgDON4-0LA\",\n      \"data-category\": \"Comments\",\n      \"data-category-id\": \"DIC_kwDON4-0LM4Cm_Ns\",\n      \"data-mapping\": \"pathname\",\n      \"data-strict\": \"0\",\n      \"data-reactions-enabled\": \"1\",\n      \"data-emit-metadata\": \"0\",\n      \"data-input-position\": \"bottom\",\n      \"data-theme\": \"dark\",\n      \"data-lang\": \"ko\",\n      \"data-loading\": \"lazy\",\n      crossorigin: \"anonymous\",\n      async: true,\n    }\n\n    Object.entries(giscusConfig).forEach(([key, value]) => {\n      giscus.setAttribute(key, value)\n    })\n\n    commentRef.current.appendChild(giscus)\n  }, [])\n\n  return <div ref={commentRef} />\n}\n\nexport default Comments\n","import React, { useEffect, useState } from \"react\"\n\nconst TableOfContents = ({ html }) => {\n  const [headings, setHeadings] = useState([])\n  const [activeId, setActiveId] = useState(\"\")\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return\n\n    const tempDiv = document.createElement(\"div\")\n    tempDiv.innerHTML = html\n\n    const headingElements = tempDiv.querySelectorAll(\"h1, h2, h3, h4\")\n    const headingsList = Array.from(headingElements).map(heading => ({\n      id: heading.id,\n      text: heading.textContent,\n      level: parseInt(heading.tagName.charAt(1)),\n    }))\n\n    setHeadings(headingsList)\n\n    // Intersection Observer로 현재 보이는 섹션 추적\n    const observer = new IntersectionObserver(\n      entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            setActiveId(entry.target.id)\n          }\n        })\n      },\n      {\n        rootMargin: \"-100px 0px -66%\",\n        threshold: 0,\n      }\n    )\n\n    // 실제 DOM의 헤딩 요소들 관찰\n    const actualHeadings = document.querySelectorAll(\n      \".blog-post h1, .blog-post h2, .blog-post h3, .blog-post h4\"\n    )\n    actualHeadings.forEach(heading => observer.observe(heading))\n\n    return () => {\n      actualHeadings.forEach(heading => observer.unobserve(heading))\n    }\n  }, [html])\n\n  const handleClick = (e, id) => {\n    e.preventDefault()\n    if (typeof window === \"undefined\") return\n\n    const element = document.getElementById(id)\n    if (element) {\n      const yOffset = -80 // 헤더 높이만큼 오프셋\n      const y =\n        element.getBoundingClientRect().top + window.pageYOffset + yOffset\n      window.scrollTo({ top: y, behavior: \"smooth\" })\n    }\n  }\n\n  if (headings.length === 0) return null\n\n  return (\n    <nav className=\"toc-container mt-5\">\n      <ul className=\"toc-list\">\n        {headings.map((heading, index) => (\n          <li\n            key={index}\n            className={`toc-item toc-level-${heading.level} ${\n              activeId === heading.id ? \"active\" : \"\"\n            }`}\n          >\n            <a\n              href={`#${heading.id}`}\n              onClick={e => handleClick(e, heading.id)}\n              className=\"toc-link\"\n            >\n              {heading.text}\n            </a>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  )\n}\n\nexport default TableOfContents\n","import * as React from \"react\"\nimport { useEffect } from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport Seo from \"../components/seo\"\nimport Comments from \"../components/comment\"\nimport TableOfContents from \"../components/TableOfContents\"\nimport { trackPostVisit } from \"../lib/trackPostVisit\"\nimport { usePostVisit } from \"../hooks/usePostVisit\"\nimport { getTagColor } from \"../utils/tagColors\"\n\nconst BlogPostTemplate = ({\n  data: { previous, next, site, markdownRemark: post, allMarkdownRemark },\n  location,\n}) => {\n  const siteTitle = site.siteMetadata?.title || `Title`\n  const {\n    formattedCount,\n    formattedTime,\n    loading: visitLoading,\n  } = usePostVisit(post.fields.slug)\n\n  // 관련 글 찾기 (현재 글의 태그 중 하나라도 포함된 글들, 현재 글 제외)\n  const relatedPosts = allMarkdownRemark.nodes\n    .filter(node => {\n      if (node.fields.slug === post.fields.slug) return false\n      return post.frontmatter.tags?.some(tag =>\n        node.frontmatter.tags?.includes(tag)\n      )\n    })\n    .slice(0, 6) // 최대 6개까지만 표시\n\n  // 게시물 방문 추적\n  useEffect(() => {\n    if (post?.fields?.slug) {\n      trackPostVisit(post.fields.slug)\n    }\n  }, [post?.fields?.slug])\n\n  return (\n    <Layout location={location} title={siteTitle}>\n      <div className=\"blog-post-container\">\n        <article\n          className=\"blog-post\"\n          itemScope\n          itemType=\"http://schema.org/Article\"\n        >\n          <header>\n            <h1 itemProp=\"headline\">{post.frontmatter.title}</h1>\n            <div className=\"flex gap-2 mb-3 flex-wrap\">\n              {post.frontmatter.tags?.map(tag => (\n                <Link\n                  key={tag}\n                  to={`/?tag=${tag}`}\n                  className=\"px-2 py-0.5 rounded-lg text-white font-bold text-xs md:text-sm border-2 hover:shadow-md transition-all\"\n                  style={{\n                    color: getTagColor(tag),\n                    borderColor: getTagColor(tag),\n                    backgroundColor: `${getTagColor(tag)}15`,\n                  }}\n                >\n                  #{tag}\n                </Link>\n              ))}\n            </div>\n            <div className=\"flex items-center gap-3 text-gray-400 text-sm mb-4\">\n              <time>{post.frontmatter.date}</time>\n              {!visitLoading && (\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"w-px h-3 bg-gray-700\" />\n                  <span className=\"flex items-center gap-1\">\n                    <svg\n                      className=\"w-4 h-4\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                      />\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"\n                      />\n                    </svg>\n                    {formattedCount} views\n                  </span>\n                  {formattedTime && (\n                    <>\n                      <span className=\"w-px h-3 bg-gray-700\" />\n                      <span className=\"flex items-center gap-1\">\n                        <svg\n                          className=\"w-4 h-4\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={2}\n                            d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n                          />\n                        </svg>\n                        Last viewed {formattedTime}\n                      </span>\n                    </>\n                  )}\n                </div>\n              )}\n            </div>\n          </header>\n          <section\n            dangerouslySetInnerHTML={{ __html: post.html }}\n            itemProp=\"articleBody\"\n          />\n          <footer className=\"mt-10\">\n            <Comments />\n          </footer>\n        </article>\n        <aside className=\"toc-sidebar\">\n          <TableOfContents html={post.html} />\n        </aside>\n      </div>\n\n      <nav className=\"blog-post-nav mt-10\">\n        <div className=\"flex justify-between items-center py-6 border-t border-gray-800\">\n          <div className=\"flex-1\">\n            {previous && (\n              <Link\n                to={previous.fields.slug}\n                rel=\"prev\"\n                className=\"group flex flex-col gap-1\"\n              >\n                <span className=\"text-xs text-gray-500 group-hover:text-gray-400 transition-colors\">\n                  ← 이전 글\n                </span>\n                <span className=\"text-sm md:text-base font-bold text-gray-300 group-hover:text-white transition-colors line-clamp-1\">\n                  {previous.frontmatter.title}\n                </span>\n              </Link>\n            )}\n          </div>\n          <div className=\"w-px h-10 bg-gray-800 mx-4\" />\n          <div className=\"flex-1 text-right\">\n            {next && (\n              <Link\n                to={next.fields.slug}\n                rel=\"next\"\n                className=\"group flex flex-col gap-1\"\n              >\n                <span className=\"text-xs text-gray-500 group-hover:text-gray-400 transition-colors\">\n                  다음 글 →\n                </span>\n                <span className=\"text-sm md:text-base font-bold text-gray-300 group-hover:text-white transition-colors line-clamp-1\">\n                  {next.frontmatter.title}\n                </span>\n              </Link>\n            )}\n          </div>\n        </div>\n      </nav>\n\n      {relatedPosts.length > 0 && (\n        <div className=\"pt-10 border-t border-gray-800\">\n          <h3 className=\"text-xl md:text-2xl font-bold text-white mb-6\">\n            <span\n              style={{\n                color: getTagColor(post.frontmatter.tags?.[0]),\n              }}\n            >\n              #{post.frontmatter.tags?.[0]}\n            </span>{\" \"}\n            관련 포스트\n          </h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {relatedPosts.map(relatedPost => (\n              <Link\n                key={relatedPost.fields.slug}\n                to={relatedPost.fields.slug}\n                className=\"group p-4 rounded-xl bg-[#1a1a1a] border border-gray-800 hover:border-gray-600 transition-all flex flex-col justify-between h-full\"\n              >\n                <div>\n                  <h4\n                    className=\"text-base font-bold mb-2 group-hover:text-blue-400 transition-colors line-clamp-2\"\n                    style={{ color: relatedPost.frontmatter.pointColor }}\n                  >\n                    {relatedPost.frontmatter.title}\n                  </h4>\n                </div>\n                <time className=\"text-xs text-gray-500\">\n                  {relatedPost.frontmatter.date}\n                </time>\n              </Link>\n            ))}\n          </div>\n        </div>\n      )}\n    </Layout>\n  )\n}\n\nexport const Head = ({ data: { markdownRemark: post, site } }) => {\n  const siteUrl = site.siteMetadata.siteUrl\n  const postUrl = `${siteUrl}${post.fields.slug}`\n\n  // Gatsby가 처리한 실제 이미지 URL 사용\n  let postImage = null\n  if (post.frontmatter.thumbnail?.childImageSharp?.fixed?.src) {\n    // fixed 레이아웃에서 실제 처리된 이미지 경로 사용\n    postImage = `${siteUrl}${post.frontmatter.thumbnail.childImageSharp.fixed.src}`\n  } else if (post.frontmatter.thumbnail?.publicURL) {\n    // fallback: publicURL 사용\n    postImage = `${siteUrl}${post.frontmatter.thumbnail.publicURL}`\n  }\n\n  const publishedTime = post.frontmatter.date\n    ? new Date(post.frontmatter.date).toISOString()\n    : null\n\n  // keywords 생성: frontmatter의 keywords가 있으면 사용, 없으면 tags 사용\n  const keywords = post.frontmatter.keywords\n    ? post.frontmatter.keywords\n    : post.frontmatter.tags?.join(\", \")\n\n  return (\n    <Seo\n      title={post.frontmatter.title}\n      description={post.frontmatter.description || post.excerpt}\n      image={postImage}\n      imageAlt={post.frontmatter.title}\n      type=\"article\"\n      url={postUrl}\n      publishedTime={publishedTime}\n      author={site.siteMetadata.author.name}\n      keywords={keywords}\n    />\n  )\n}\n\nexport default BlogPostTemplate\n\nexport const pageQuery = graphql`\n  query BlogPostBySlug(\n    $id: String!\n    $previousPostId: String\n    $nextPostId: String\n  ) {\n    site {\n      siteMetadata {\n        title\n        siteUrl\n        author {\n          name\n        }\n      }\n    }\n    allMarkdownRemark(sort: { frontmatter: { date: DESC } }, limit: 1000) {\n      nodes {\n        fields {\n          slug\n        }\n        frontmatter {\n          title\n          date(formatString: \"YYYY-MM-DD\")\n          tags\n          pointColor\n        }\n      }\n    }\n    markdownRemark(id: { eq: $id }) {\n      id\n      excerpt(pruneLength: 160)\n      html\n      fields {\n        slug\n      }\n      frontmatter {\n        title\n        date(formatString: \"YYYY-MM-DD\")\n        description\n        pointColor\n        tags\n        keywords\n        thumbnail {\n          publicURL\n          childImageSharp {\n            gatsbyImageData(width: 1200, layout: FIXED)\n            fixed(width: 1200) {\n              src\n            }\n          }\n        }\n      }\n    }\n    previous: markdownRemark(id: { eq: $previousPostId }) {\n      fields {\n        slug\n      }\n      frontmatter {\n        title\n      }\n    }\n    next: markdownRemark(id: { eq: $nextPostId }) {\n      fields {\n        slug\n      }\n      frontmatter {\n        title\n      }\n    }\n  }\n`\n","// 태그별 색상 설정\n// 새로운 태그를 추가할 때 여기에 색상을 정의하세요\nexport const tagColors = {\n  AI: \"#FF6B6B\", // 빨간색\n  DB: \"#4ECDC4\", // 청록색\n  Flutter: \"#02569B\", // Flutter 파란색\n  멋쟁이사자처럼: \"#FF7710\", // 주황색\n  회고: \"#95E1D3\", // 민트색\n  인턴: \"#F38181\", // 핑크색\n  카카오뱅크: \"#FFE300\", // 카카오 노란색\n  네이버랩스: \"#03C75A\", // 네이버 초록색\n  알고리즘: \"#adb5bd\",\n  컴퓨터구조: \"#adb5bd\",\n  운영체제: \"#adb5bd\",\n}\n\n// 정의되지 않은 태그의 기본 색상\nexport const defaultTagColor = \"#6C757D\" // 회색\n\n// 태그 색상을 가져오는 함수\nexport const getTagColor = tag => {\n  return tagColors[tag] || defaultTagColor\n}\n"],"names":["usePostVisit","postSlug","visitCount","setVisitCount","useState","lastVisitedAt","setLastVisitedAt","loading","setLoading","useEffect","supabase","async","getPostVisitInfo","error","console","fetchPostVisitInfo","formattedCount","count","toString","toFixed","formattedTime","dateString","date","Date","diff","minutes","Math","floor","hours","days","formatRelativeTime","trackPostVisit","now","toISOString","data","existingPost","fetchError","from","select","eq","maybeSingle","updateError","update","visit_count","last_visited_at","insertError","insert","post_slug","getTopVisitedPosts","limit","order","ascending","Comments","commentRef","useRef","giscus","document","createElement","Object","entries","src","crossorigin","forEach","_ref","key","value","setAttribute","current","appendChild","React","ref","html","headings","setHeadings","activeId","setActiveId","window","tempDiv","innerHTML","headingElements","querySelectorAll","headingsList","Array","map","heading","id","text","textContent","level","parseInt","tagName","charAt","observer","IntersectionObserver","entry","isIntersecting","target","rootMargin","threshold","actualHeadings","observe","unobserve","length","className","index","href","onClick","e","handleClick","preventDefault","element","getElementById","yOffset","y","getBoundingClientRect","top","pageYOffset","scrollTo","behavior","Head","_ref2","_post$frontmatter$thu","_post$frontmatter$thu2","_post$frontmatter$thu3","_post$frontmatter$thu4","_post$frontmatter$tag5","markdownRemark","post","site","siteUrl","siteMetadata","postUrl","fields","slug","postImage","frontmatter","thumbnail","childImageSharp","fixed","publicURL","publishedTime","keywords","tags","join","Seo","title","description","excerpt","image","imageAlt","type","url","author","name","_site$siteMetadata","_post$fields2","_post$frontmatter$tag2","_post$frontmatter$tag3","_post$frontmatter$tag4","previous","next","allMarkdownRemark","location","siteTitle","visitLoading","relatedPosts","nodes","filter","node","_post$frontmatter$tag","some","tag","_node$frontmatter$tag","includes","slice","_post$fields","Layout","itemScope","itemType","itemProp","Link","to","style","color","getTagColor","borderColor","backgroundColor","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","dangerouslySetInnerHTML","__html","TableOfContents","rel","relatedPost","pointColor","tagColors","AI","DB","Flutter","멋쟁이사자처럼","회고","인턴","카카오뱅크","네이버랩스","알고리즘","컴퓨터구조","운영체제"],"sourceRoot":""}