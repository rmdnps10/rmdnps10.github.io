"use strict";(self.webpackChunkgatsby_starter_blog=self.webpackChunkgatsby_starter_blog||[]).push([[751],{6305:function(t,e,r){r.d(e,{Bl:function(){return l},Jc:function(){return a},kB:function(){return i}});var n=r(6113);const a=async t=>{if(n.N&&t)try{const e=(new Date).toISOString(),{data:r,error:a}=await n.N.from("post_visits").select("*").eq("post_slug",t).maybeSingle();if(a)throw a;if(r){const{error:a}=await n.N.from("post_visits").update({visit_count:r.visit_count+1,last_visited_at:e}).eq("post_slug",t);if(a)throw a}else{const{error:r}=await n.N.from("post_visits").insert([{post_slug:t,visit_count:1,last_visited_at:e}]);if(r)throw r}}catch(e){console.error("Error tracking post visit:",e)}},i=async t=>{if(!n.N||!t)return{visitCount:0,lastVisitedAt:null};try{const{data:e,error:r}=await n.N.from("post_visits").select("visit_count, last_visited_at").eq("post_slug",t).maybeSingle();if(r)throw r;return e?{visitCount:(null==e?void 0:e.visit_count)||0,lastVisitedAt:(null==e?void 0:e.last_visited_at)||null}:{visitCount:0,lastVisitedAt:null}}catch(e){return console.error("Error fetching post visit info:",e),{visitCount:0,lastVisitedAt:null}}},l=async function(t){if(void 0===t&&(t=3),!n.N)return[];try{const{data:e,error:r}=await n.N.from("post_visits").select("post_slug, visit_count, last_visited_at").order("visit_count",{ascending:!1}).limit(t);if(r)throw r;return e||[]}catch(e){return console.error("Error fetching top visited posts:",e),[]}}},6994:function(t,e,r){r.r(e),r.d(e,{Head:function(){return u},default:function(){return d}});var n=r(6540),a=r(4794),i=r(6007),l=r(4496);var o=()=>{const t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const e=document.createElement("script");Object.entries({src:"https://giscus.app/client.js","data-repo":"rmdnps10/inyoung.dev","data-repo-id":"R_kgDON4-0LA","data-category":"Comments","data-category-id":"DIC_kwDON4-0LM4Cm_Ns","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":"dark","data-lang":"ko","data-loading":"lazy",crossorigin:"anonymous",async:!0}).forEach((t=>{let[r,n]=t;e.setAttribute(r,n)})),t.current.appendChild(e)}),[]),n.createElement("div",{ref:t})};var s=t=>{let{html:e}=t;const{0:r,1:a}=(0,n.useState)([]),{0:i,1:l}=(0,n.useState)("");(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const t=document.createElement("div");t.innerHTML=e;const r=t.querySelectorAll("h1, h2, h3, h4"),n=Array.from(r).map((t=>({id:t.id,text:t.textContent,level:parseInt(t.tagName.charAt(1))})));a(n);const i=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&l(t.target.id)}))}),{rootMargin:"-100px 0px -66%",threshold:0}),o=document.querySelectorAll(".blog-post h1, .blog-post h2, .blog-post h3, .blog-post h4");return o.forEach((t=>i.observe(t))),()=>{o.forEach((t=>i.unobserve(t)))}}),[e]);return 0===r.length?null:n.createElement("nav",{className:"toc-container mt-5"},n.createElement("ul",{className:"toc-list"},r.map(((t,e)=>n.createElement("li",{key:e,className:"toc-item toc-level-"+t.level+" "+(i===t.id?"active":"")},n.createElement("a",{href:"#"+t.id,onClick:e=>((t,e)=>{if(t.preventDefault(),"undefined"==typeof window)return;const r=document.getElementById(e);if(r){const t=-80,e=r.getBoundingClientRect().top+window.pageYOffset+t;window.scrollTo({top:e,behavior:"smooth"})}})(e,t.id),className:"toc-link"},t.text))))))},c=r(6305);const u=t=>{var e,r,a,i,o;let{data:{markdownRemark:s,site:c}}=t;const u=c.siteMetadata.siteUrl,d=""+u+s.fields.slug;let m=null;null!==(e=s.frontmatter.thumbnail)&&void 0!==e&&null!==(r=e.childImageSharp)&&void 0!==r&&null!==(a=r.fixed)&&void 0!==a&&a.src?m=""+u+s.frontmatter.thumbnail.childImageSharp.fixed.src:null!==(i=s.frontmatter.thumbnail)&&void 0!==i&&i.publicURL&&(m=""+u+s.frontmatter.thumbnail.publicURL);const f=s.frontmatter.date?new Date(s.frontmatter.date).toISOString():null,p=s.frontmatter.keywords?s.frontmatter.keywords:null===(o=s.frontmatter.tags)||void 0===o?void 0:o.join(", ");return n.createElement(l.A,{title:s.frontmatter.title,description:s.frontmatter.description||s.excerpt,image:m,imageAlt:s.frontmatter.title,type:"article",url:d,publishedTime:f,author:c.siteMetadata.author.name,keywords:p})};var d=t=>{var e,r;let{data:{previous:l,next:u,site:d,markdownRemark:m},location:f}=t;const p=(null===(e=d.siteMetadata)||void 0===e?void 0:e.title)||"Title";return(0,n.useEffect)((()=>{var t;null!=m&&null!==(t=m.fields)&&void 0!==t&&t.slug&&(0,c.Jc)(m.fields.slug)}),[null==m||null===(r=m.fields)||void 0===r?void 0:r.slug]),n.createElement(i.A,{location:f,title:p},n.createElement("div",{className:"blog-post-container"},n.createElement("article",{className:"blog-post",itemScope:!0,itemType:"http://schema.org/Article"},n.createElement("header",null,n.createElement("h1",{itemProp:"headline"},m.frontmatter.title),n.createElement("p",null,m.frontmatter.date)),n.createElement("section",{dangerouslySetInnerHTML:{__html:m.html},itemProp:"articleBody"}),n.createElement("footer",null,n.createElement(o,null))),n.createElement("aside",{className:"toc-sidebar"},n.createElement(s,{html:m.html}))),n.createElement("nav",{className:"blog-post-nav"},n.createElement("ul",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",listStyle:"none",padding:0}},n.createElement("li",null,l&&n.createElement(a.Link,{to:l.fields.slug,rel:"prev"},"← ",l.frontmatter.title)),n.createElement("li",null,u&&n.createElement(a.Link,{to:u.fields.slug,rel:"next",className:""},u.frontmatter.title," →")))))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-cccb0926f285f17428ad.js.map